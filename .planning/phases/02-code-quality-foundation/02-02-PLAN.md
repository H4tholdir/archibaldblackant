---
phase: 02-code-quality-foundation
plan: 02
type: execute
---

<objective>
Replace all console.log statements with Winston logger in core sync services.

Purpose: Establish proper structured logging in sync services for production observability.
Output: customer-sync, product-sync, and price-sync services using logger instead of console.log.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-code-quality-foundation/02-01-SUMMARY.md
@.planning/codebase/CONVENTIONS.md
@src/logger.ts
@src/customer-sync-service.ts
@src/product-sync-service.ts
@src/price-sync-service.ts

**Tech stack available:**
- Winston logger already configured in src/logger.ts
- Logging levels: debug, info, warn, error
- Structured logging with metadata support

**Established patterns:**
- Import: `import { logger } from './logger'`
- Usage: `logger.info('Message', { metadata })`
- Avoid console.log in production code

**Current state:**
- 36 console.log instances total in backend/src/
- Need to replace in sync services first (core business logic)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace console.log in customer-sync and product-sync services</name>
  <files>src/customer-sync-service.ts, src/product-sync-service.ts</files>
  <action>
For customer-sync-service.ts:
- Add import: `import { logger } from './logger'` at top
- Replace all console.log() with appropriate logger calls:
  - Debug/trace info → logger.debug()
  - Progress updates → logger.info()
  - Warnings → logger.warn()
  - Errors → logger.error()
- Add structured metadata where useful (e.g., { customerCount, page, totalPages })
- Keep same message content, just change logging mechanism

For product-sync-service.ts:
- Same pattern as customer-sync-service.ts
- Add metadata like { productCount, page, hasNextPage }
- Preserve all existing logging information

DO NOT change any business logic, only logging mechanism.
  </action>
  <verify>grep -r "console\.log" src/customer-sync-service.ts src/product-sync-service.ts returns empty</verify>
  <done>No console.log remains in these two services, logger imports added, messages preserved</done>
</task>

<task type="auto">
  <name>Task 2: Replace console.log in price-sync-service</name>
  <files>src/price-sync-service.ts</files>
  <action>
For price-sync-service.ts:
- Add import: `import { logger } from './logger'` at top
- Replace all console.log() with logger calls:
  - Debug info → logger.debug()
  - Price sync progress → logger.info()
  - Validation warnings → logger.warn()
  - Errors → logger.error()
- Add metadata: { priceCount, articlesProcessed, validationErrors }
- Preserve existing error context and debug information

DO NOT change business logic or error handling, only logging calls.
  </action>
  <verify>grep -r "console\.log" src/price-sync-service.ts returns empty</verify>
  <done>No console.log in price-sync-service, logger used throughout</done>
</task>

<task type="auto">
  <name>Task 3: Verify all sync services build and no console.log remains</name>
  <files>N/A</files>
  <action>
Run verification checks:
1. TypeScript compilation: `npx tsc --noEmit` (should pass)
2. Grep verification: `grep -r "console\.log" src/customer-sync-service.ts src/product-sync-service.ts src/price-sync-service.ts` (should be empty)
3. Verify logger imports are present in all three files
4. Check that no new TypeScript errors were introduced

If any issues found, fix them before completing.
  </action>
  <verify>npx tsc --noEmit passes, grep shows no console.log in the 3 sync services</verify>
  <done>All sync services use logger, TypeScript clean, no console.log remains</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] No console.log in customer-sync-service.ts
- [ ] No console.log in product-sync-service.ts
- [ ] No console.log in price-sync-service.ts
- [ ] TypeScript compilation passes
- [ ] Logger imports added to all three services
</verification>

<success_criteria>
- All 3 tasks completed
- All console.log replaced with logger in sync services
- No TypeScript errors introduced
- Business logic unchanged
- Logging information preserved
</success_criteria>

<output>
After completion, create `.planning/phases/02-code-quality-foundation/02-02-SUMMARY.md`:

# Phase 2 Plan 02: Replace console.log in Core Sync Services

**Structured logging established in customer/product/price sync services - [X] console.log instances replaced**

## Accomplishments

- Replaced console.log with Winston logger in customer-sync-service
- Replaced console.log with Winston logger in product-sync-service
- Replaced console.log with Winston logger in price-sync-service
- Added structured metadata for observability
- TypeScript compilation clean

## Files Created/Modified

- `src/customer-sync-service.ts` - Logger integration
- `src/product-sync-service.ts` - Logger integration
- `src/price-sync-service.ts` - Logger integration

## Decisions Made

[Document any decisions about log levels or metadata structure]

## Issues Encountered

[Document any problems and resolutions, or "None"]

## Next Step

Ready for 02-03-PLAN.md (Replace console.log in Bot & Pool)
</output>
