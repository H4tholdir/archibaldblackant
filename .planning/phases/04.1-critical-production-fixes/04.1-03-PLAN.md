---
phase: 04.1-critical-production-fixes
plan: 03
type: execute
---

<objective>
Enhance voice modal UX with comprehensive instructions, better examples, and detailed command explanations.

Purpose: Current voice modal has minimal instructions. Agents need better examples with real article codes, detailed workflow guidance, and error recovery instructions to increase adoption and confidence.

Output: Voice modal with comprehensive instructions including real examples, command details, workflow steps, and error recovery.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04.1-critical-production-fixes/04.1-CONTEXT.md

**Key files:**
@archibald-web-app/frontend/src/components/OrderForm.tsx
@archibald-web-app/frontend/src/App.css

**Current state:**
- Basic example: "Cliente Mario Rossi, articolo SF1000 quantitÃ  5..."
- Command legend exists but minimal
- No workflow explanation
- No error recovery guidance

**Requirements:**
1. Better examples with real article code formats (XX.XX.XXX.XXX with "punto")
2. Detailed command explanations (when to use, what happens after)
3. Step-by-step workflow guidance (when to speak vs wait)
4. Error recovery instructions (how to fix wrong customer/article)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand examples with real article code formats and multi-item scenarios</name>
  <files>archibald-web-app/frontend/src/components/OrderForm.tsx</files>
  <action>
Enhance voice modal examples section with:

**Example 1: Single Item Order**
"Cliente Mario Rossi, articolo zero due punto tre tre punto zero uno sei punto zero uno zero quantitÃ  cinque"
â†’ Customer: Mario Rossi, Article: 02.33.016.010, Quantity: 5

**Example 2: Multi-Item Order**
"Cliente ACME S.P.A., articolo zero cinque punto due uno punto zero zero uno punto novecento quantitÃ  dieci, virgola articolo uno due punto quattro quattro punto zero tre cinque punto zero zero tre quantitÃ  venti"
â†’ Customer: ACME S.P.A., 2 articles with quantities

**Example 3: Using "novecento" for 900 codes**
"articolo zero uno punto novecento uno punto zero zero uno punto zero zero tre quantitÃ  quindici"
â†’ Article: 01.9001.001.003 (novecento converts to 900)

Show that:
- "punto" = decimal separator (.)
- "virgola" = next item separator
- Numbers spoken digit-by-digit for article codes
- "novecento" special case for 900 prefix

Update modal content in OrderForm.tsx where voice instructions are rendered.
Don't modify voice recognition logic - only UI content.
  </action>
  <verify>Modal shows 3 detailed examples with real article formats, TypeScript compiles</verify>
  <done>Examples demonstrate real article codes, "punto" usage, multi-item, and "novecento"</done>
</task>

<task type="auto">
  <name>Task 2: Add detailed workflow guide and command explanations</name>
  <files>archibald-web-app/frontend/src/components/OrderForm.tsx</files>
  <action>
Add comprehensive workflow section to voice modal:

**ðŸ“‹ Come Funziona (Step-by-Step)**

1. **Tap microfono** â†’ Modal si apre, ascolto inizia
2. **Dettare ordine** â†’ Parla chiaramente: cliente, articoli, quantitÃ 
3. **Attendere feedback** â†’ Sistema mostra riconoscimento in tempo reale
4. **Verificare bozza** â†’ Controlla cliente e articoli riconosciuti
5. **Correggere se necessario** â†’ Usa comandi o tap per modifiche
6. **Confermare** â†’ Tap "Conferma" quando tutto Ã¨ corretto

**ðŸŽ¤ Comandi Vocali Disponibili**

- **"conferma ordine"** â†’ Conferma la bozza e procede con l'invio
  - Quando: dopo aver verificato che tutto Ã¨ corretto
  - Risultato: modal si chiude, ordine viene processato

- **"annulla"** â†’ Cancella la bozza corrente e ricomincia
  - Quando: se vuoi ripartire da zero
  - Risultato: bozza svuotata, pronto per nuovo dettato

- **"riprova"** â†’ Cancella e riavvia il riconoscimento
  - Quando: se il sistema ha capito male
  - Risultato: modal resta aperto, puÃ² ridettare

**ðŸ’¡ Consigli**
- Parlare in ambiente silenzioso
- Scandire bene i numeri degli articoli
- Fare pause tra "virgola" e prossimo articolo
- Verificare sempre prima di confermare

Add this content to modal body in OrderForm.tsx.
Use clear formatting with emojis for visual hierarchy.
Keep Italian language throughout (user's agents are Italian).
  </action>
  <verify>Modal contains workflow guide and detailed command explanations, TypeScript compiles</verify>
  <done>Workflow steps, command details, and usage tips added to voice modal</done>
</task>

<task type="auto">
  <name>Task 3: Add error recovery instructions</name>
  <files>archibald-web-app/frontend/src/components/OrderForm.tsx</files>
  <action>
Add error recovery section to voice modal:

**ðŸ”§ Cosa Fare Se...**

**Cliente sbagliato riconosciuto:**
1. Usa comando "riprova"
2. Ri-detta nome cliente piÃ¹ lentamente
3. Oppure: tap su campo cliente per editare manualmente

**Articolo sbagliato o mancante:**
1. Tap sulla riga dell'articolo per modificare codice
2. Oppure: usa "annulla" e ri-detta ordine completo
3. Ricorda: usa "punto" per separatori e "novecento" per 900

**QuantitÃ  errata:**
1. Tap sul campo quantitÃ  per correggere
2. Non serve ri-dettare tutto, modifica solo il valore

**Riconoscimento non parte:**
1. Controlla permessi microfono nel browser
2. Tap di nuovo sull'icona microfono
3. Verifica che browser supporti Web Speech API

**Sistema non capisce:**
- Parla piÃ¹ lentamente
- Scandisci digit-by-digit per articoli
- Evita rumori di fondo
- Usa "riprova" per nuovo tentativo

Add this as collapsible section or separate panel in modal.
Keep tone helpful and practical.
Reference actual UI elements (tap, campo, riga).
  </action>
  <verify>Error recovery section added, covers common issues, TypeScript compiles</verify>
  <done>Voice modal includes comprehensive error recovery guidance</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] TypeScript compiles: `cd archibald-web-app/frontend && npx tsc --noEmit`
- [ ] Voice modal has 3+ detailed examples with real article codes
- [ ] Workflow guide with step-by-step instructions present
- [ ] Command explanations detailed (when/what/result)
- [ ] Error recovery section covers common issues
- [ ] Content in Italian, clear formatting
</verification>

<success_criteria>
- Examples show real article formats (XX.XX.XXX.XXX)
- Workflow guide with 6 clear steps
- All 3 voice commands explained in detail
- Error recovery covers customer/article/quantity issues
- Modal content substantially more comprehensive than before
</success_criteria>

<output>
After completion, create `.planning/phases/04.1-critical-production-fixes/04.1-03-SUMMARY.md`
</output>
