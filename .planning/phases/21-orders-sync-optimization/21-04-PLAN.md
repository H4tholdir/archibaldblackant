---
phase: 21-orders-sync-optimization
plan: 04
type: execute
---

<objective>
Add API endpoints and UI controls for granular manual order sync.

Purpose: Give users explicit control over order sync strategy.
Output: API endpoints for sync granularity + frontend UI dropdown.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
</execution_context>

<context>
@.planning/phases/18-customers-sync-optimization/18-04-PLAN.md

**Implementation**: Apply identical pattern from Phases 18-04, 19-04, 20-04 to order sync endpoints.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add granular order sync API endpoints</name>
  <files>
    archibald-web-app/backend/src/index.ts
  </files>
  <action>
    Add POST /api/sync/orders/full and /incremental endpoints.
  </action>
  <verify>
    Endpoints trigger correct sync modes
  </verify>
  <done>
    Granular endpoints added. TypeScript passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update frontend SyncButton for orders</name>
  <files>
    archibald-web-app/frontend/src/components/SyncButton.tsx
  </files>
  <action>
    Update endpoint mapping to include orders sync modes.
  </action>
  <verify>
    Dropdown works for order sync
  </verify>
  <done>
    SyncButton supports orders. TypeScript passes.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update sync progress display</name>
  <files>
    archibald-web-app/frontend/src/components/SyncBanner.tsx
  </files>
  <action>
    Show order sync mode in progress messages.
  </action>
  <verify>
    Progress shows order sync mode
  </verify>
  <done>
    Progress displays order mode. TypeScript passes.
  </done>
</task>

</tasks>

<success_criteria>
- Granular API endpoints functional
- Frontend dropdown UI
- Sync progress displays mode
- Consistent with Phases 18-04, 19-04, 20-04
</success_criteria>

<output>
Create `.planning/phases/21-orders-sync-optimization/21-04-SUMMARY.md`
</output>
