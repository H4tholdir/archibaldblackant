# Plan 01-01: Rotate Test Credentials

**Phase:** 1 - Security Critical Fixes
**Created:** 2026-01-11
**Status:** Ready to execute

## Goal

Rotate the compromised test credentials ([REDACTED-USERNAME] / [REDACTED-PASSWORD]) in Archibald ERP to prevent unauthorized access using the old credentials exposed in git history.

## Context

The credentials currently in `archibald-web-app/backend/.env` are the user's personal test credentials, not a third-party leak. However, they must be rotated because:

1. They have been committed to git history and exposed
2. Anyone with access to the repository has the old credentials
3. Even after cleaning git history, the old credentials remain functional in Archibald ERP until manually changed

This plan focuses ONLY on rotating the credentials in the Archibald ERP system. The git history cleanup happens in plan 01-02.

## Approach

**Manual user action required** - This cannot be automated as it requires:
- Human access to the Archibald ERP administrative interface
- Knowledge of the current password to authenticate the change
- Selection of a new secure password

The plan will provide clear instructions and verification steps for the user.

## Tasks

<task id="1">
<description>Document credential rotation procedure</description>
<details>
Create a clear, step-by-step guide for the user to rotate credentials in Archibald ERP:

1. Access Archibald ERP at https://4.231.124.90/Archibald
2. Log in with current credentials ([REDACTED-USERNAME] / [REDACTED-PASSWORD])
3. Navigate to user/account settings
4. Change password to a new secure password (minimum 12 characters, mixed case, numbers, special chars)
5. Record the new credentials securely (password manager recommended)
6. Verify the new credentials work by logging out and back in

Document this procedure in the plan output so the user can follow it immediately.
</details>
<files>
None (documentation output only)
</files>
</task>

<task id="2">
<description>Update .env with placeholder and document required action</description>
<details>
After the user confirms credential rotation in Archibald ERP, update the local `.env` file:

1. Read current `archibald-web-app/backend/.env`
2. Replace the password value with a placeholder: `ARCHIBALD_PASSWORD=<NEW_PASSWORD_HERE>`
3. Add a comment at the top: `# SECURITY: Update with new rotated credentials from Archibald ERP`
4. Instruct user to manually update with their new password

This ensures the old password is not present in the working directory while waiting for git history cleanup.

**IMPORTANT**: Do NOT commit this change yet - that happens after git history is cleaned in plan 01-02.
</details>
<files>
- archibald-web-app/backend/.env (read/write)
</files>
</task>

<task id="3">
<description>Verify credential rotation success</description>
<details>
Confirm the rotation was successful:

1. Ask user to confirm:
   - They successfully logged into Archibald ERP with NEW credentials
   - They successfully logged OUT with OLD credentials (should fail)
   - They have securely stored the new credentials (password manager)

2. Ask user to update their local `.env` file with the new password

3. Test the application can still authenticate:
   - Start the backend server
   - Trigger a sync operation or order creation
   - Verify Archibald authentication succeeds with new credentials

Document the verification results.
</details>
<files>
- archibald-web-app/backend/.env (user updates manually)
</files>
</task>

## Success Criteria

- [ ] User has successfully changed password in Archibald ERP administrative interface
- [ ] Old credentials ([REDACTED-USERNAME] / [REDACTED-PASSWORD]) no longer work for Archibald login
- [ ] New credentials work for Archibald login
- [ ] User has securely stored new credentials (password manager or equivalent)
- [ ] Local `.env` file updated with new password
- [ ] Backend application can authenticate with Archibald using new credentials
- [ ] Verification test successful (sync or order creation works)

## Dependencies

None - this is the first plan in Phase 1

## Risks

- **User forgets new password**: Mitigation - ensure password is recorded in password manager BEFORE testing logout
- **Archibald ERP password policy unknown**: Mitigation - try common password requirements first, adjust if rejected
- **No access to Archibald admin panel**: Mitigation - user must contact Archibald support for password reset

## Notes

- This plan is **prerequisite** for git history cleanup (plan 01-02) - old credentials must be non-functional before cleaning history
- The username ([REDACTED-USERNAME]) does NOT need to change - only the password
- This is a MANUAL plan - user performs the rotation, we provide guidance and verification
- Do NOT commit any `.env` changes until AFTER plan 01-02 (git history cleanup)

---

*Plan: 01-01 | Phase: 01-security-critical-fixes*
