---
phase: 27-bot-performance-profiling-v2
plan: 01
type: execute
---

<objective>
Profile bot performance post-Phase 3.1/3.2 optimizations to identify remaining bottlenecks for v2 optimization.

Purpose: Establish new baseline after Phase 3 optimizations (~82s currently) and identify next optimization opportunities.
Output: Comprehensive profiling report with bottleneck analysis, target: identify path to <60s per order.
</objective>

<context>
@.planning/phases/3-bot-performance-profiling/

**Current state** (post-Phase 3.2):
- Order creation time: ~82s (down from ~90s, 9% improvement)
- Phase 3.1 analysis identified: login (8s), navigation (12s), form filling (25s), submission (15s), confirmation (22s)
- Phase 3.2 applied: adaptive timeouts, parallel waits, optimized selectors

**Phase 27 goal**: Re-profile to find new bottlenecks after Phase 3 optimizations.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add detailed profiling instrumentation to archibald-bot.ts</name>
  <files>backend/src/archibald-bot.ts</files>
  <action>
    Add [PERF-V2] timing logs at 10+ key points:
    - Login phase
    - Navigation to order form
    - Customer autocomplete
    - Each line item addition
    - Form submission
    - Confirmation wait
    Per-section timing + cumulative time.
  </action>
  <verify>Profiling logs appear during order creation</verify>
  <done>Profiling instrumentation added. TypeScript passes.</done>
</task>

<task type="auto">
  <name>Task 2: Run profiled order creation and collect data</name>
  <files>.planning/phases/27-bot-performance-profiling-v2/PERF-DATA-V2.json</files>
  <action>
    Execute 10 test orders, collect timing data.
    Create PERF-DATA-V2.json with:
    - Current baseline: ~82s
    - Phase breakdown (same structure as Phase 3.1)
    - New bottlenecks identified
  </action>
  <verify>PERF-DATA-V2.json created with 10-order average</verify>
  <done>Performance data collected. Baseline: ~82s confirmed.</done>
</task>

<task type="auto">
  <name>Task 3: Create optimization roadmap for Phase 28</name>
  <files>.planning/phases/27-bot-performance-profiling-v2/ANALYSIS-V2.md</files>
  <action>
    Analyze bottlenecks, create ANALYSIS-V2.md:
    - Current: 82s
    - Target: <60s (-22s, -27% improvement)
    - High-impact optimizations identified
    - Aggressive optimization strategy for Phase 28
  </action>
  <verify>ANALYSIS-V2.md complete with roadmap</verify>
  <done>Optimization roadmap created for Phase 28.</done>
</task>

</tasks>

<success_criteria>
- Post-Phase-3 baseline established (~82s)
- New bottlenecks identified
- Optimization roadmap to <60s defined
- Ready for Phase 28 implementation
</success_criteria>

<output>
Create `.planning/phases/27-bot-performance-profiling-v2/27-01-SUMMARY.md`
</output>
