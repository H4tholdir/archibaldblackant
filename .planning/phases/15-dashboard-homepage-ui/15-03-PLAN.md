---
phase: 15-dashboard-homepage-ui
plan: 03
type: execute
---

<objective>
Create Orders Summary Widget with temporal breakdown and clickable navigation to filtered order history.

Purpose: Provide agents with quick overview of recent order activity (today/this week/this month), enabling immediate access to specific time periods via clickable cards.
Output: OrdersSummaryWidget component displaying order counts for 3 time periods, with click navigation to OrderHistory filtered by selected period.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-dashboard-homepage-ui/15-01-SUMMARY.md
@.planning/phases/15-dashboard-homepage-ui/15-02-SUMMARY.md

**Key files:**
@archibald-web-app/frontend/src/pages/Dashboard.tsx
@archibald-web-app/frontend/src/pages/OrderHistory.tsx
@archibald-web-app/frontend/src/components/BudgetWidget.tsx

**Tech stack available:**
- React 19 with hooks
- react-router-dom (useNavigate for programmatic navigation)
- TypeScript strict mode
- Inline styles (Phase 10-06 decision)

**Established patterns:**
- Phase 10-06: Temporal grouping with 4 periods (Oggi/Settimana/Mese/Vecchi)
- Phase 09-01: Temporal grouping for pending orders (3 periods: Oggi/Settimana/Vecchi)
- Banking app UX patterns (clickable summary cards navigating to detail views)
- Color-coded badges (Phase 10-06: blue/green/purple status indicators)

**Constraining decisions:**
- Temporal grouping established: Oggi/Settimana/Mese for dashboard summary
- OrderHistory page exists at /orders route
- No backend API yet for aggregated stats (Phase 17 will add metrics backend)
- Mock data for MVP until Phase 17 integration

**Current data availability:**
- OrderHistory page fetches orders from backend /api/orders endpoint
- No aggregated counts endpoint yet (requires Phase 17)
- Widget will use mock data for MVP, replaced in Phase 17
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create OrdersSummaryWidget with monthly/weekly order counts</name>
  <files>
    archibald-web-app/frontend/src/components/OrdersSummaryWidget.tsx,
    archibald-web-app/frontend/src/pages/Dashboard.tsx
  </files>
  <action>
    Create OrdersSummaryWidget.tsx component with:

    **Props interface:**
    ```typescript
    interface OrdersSummaryWidgetProps {
      todayCount: number;
      weekCount: number;
      monthCount: number;
    }
    ```

    **Component structure:**
    - Container div with card styling (consistent with BudgetWidget)
    - Header: "Ordini Recenti" title
    - 3 summary cards in horizontal layout (vertical stack on mobile <768px):
      - Card 1: "Oggi" + count + up/down trend icon
      - Card 2: "Questa Settimana" + count + trend
      - Card 3: "Questo Mese" + count + trend
    - Each card: border-left colored accent (blue for today, green for week, purple for month)
    - Hover effect: scale 1.02, shadow increase (indicates clickable)
    - Cursor pointer on hover

    **Card styling (inline):**
    - Container: { background: '#f8f9fa', borderLeft: '4px solid [color]', borderRadius: '8px', padding: '15px', cursor: 'pointer', transition: 'all 0.2s ease' }
    - Count: { fontSize: '32px', fontWeight: 'bold', color: '#2c3e50' }
    - Label: { fontSize: '14px', color: '#7f8c8d', marginTop: '5px' }
    - Hover: { transform: 'scale(1.02)', boxShadow: '0 4px 12px rgba(0,0,0,0.15)' }

    **Border-left colors:**
    - Today (Oggi): #3498db (blue)
    - Week (Questa Settimana): #27ae60 (green)
    - Month (Questo Mese): #9b59b6 (purple)

    **Trend icons (simple):**
    - Use Unicode arrows: ↑ for uptrend (green text), ↓ for downtrend (red text), → for neutral (gray)
    - Placeholder trend logic: compare count to previous period (mock as "+15%" or "-8%" for MVP)
    - Trend text: { fontSize: '12px', marginTop: '5px' }

    **Responsive:**
    - Mobile (<768px): Cards stacked vertically, full width
    - Desktop (>=768px): Cards in row, display flex, gap 15px

    Integrate in Dashboard.tsx:
    - Replace second placeholder div with <OrdersSummaryWidget todayCount={3} weekCount={12} monthCount={45} />
    - Temporary mock data until Phase 17 backend integration

    Why border-left accent: Banking app pattern (Intesa uses colored borders for account type differentiation), provides visual hierarchy without overwhelming design.
  </action>
  <verify>
    npm run typecheck passes

    Manual check:
    1. Dashboard renders OrdersSummaryWidget in second widget section
    2. Widget displays "Ordini Recenti" title
    3. 3 cards visible:
       - "Oggi" with 3 count, blue left border
       - "Questa Settimana" with 12 count, green left border
       - "Questo Mese" with 45 count, purple left border
    4. Hover effect works (scale + shadow increase)
    5. Responsive: Cards stack vertically on mobile, horizontal on desktop
    6. No console errors
  </verify>
  <done>
    OrdersSummaryWidget component created with props interface.
    3 summary cards display with colored left borders (blue/green/purple).
    Hover effects implemented (scale + shadow).
    Responsive layout (vertical on mobile, horizontal on desktop).
    Widget integrated in Dashboard.tsx with mock data.
    TypeScript compilation passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add clickable navigation to filtered order history</name>
  <files>
    archibald-web-app/frontend/src/components/OrdersSummaryWidget.tsx
  </files>
  <action>
    Enhance OrdersSummaryWidget with clickable navigation:

    **Add useNavigate hook:**
    ```typescript
    import { useNavigate } from 'react-router-dom';
    const navigate = useNavigate();
    ```

    **Click handlers for each card:**
    ```typescript
    const handleTodayClick = () => {
      // Navigate to /orders with today filter
      navigate('/orders?filter=today');
    };

    const handleWeekClick = () => {
      // Navigate to /orders with week filter
      navigate('/orders?filter=week');
    };

    const handleMonthClick = () => {
      // Navigate to /orders with month filter
      navigate('/orders?filter=month');
    };
    ```

    **Add onClick handlers to cards:**
    - Card 1 (Oggi): onClick={handleTodayClick}
    - Card 2 (Questa Settimana): onClick={handleWeekClick}
    - Card 3 (Questo Mese): onClick={handleMonthClick}

    **Visual feedback:**
    - Active state on click: brief background color flash (add onMouseDown style change)
    - Add aria-label for accessibility: "Visualizza ordini di oggi", "Visualizza ordini della settimana", etc.
    - Add role="button" for semantic HTML

    **Query parameter format:**
    - today: ?filter=today
    - week: ?filter=week
    - month: ?filter=month

    **Note on OrderHistory integration:**
    - OrderHistory page will need to read query params and apply filters (deferred to Plan 15-04 or future enhancement)
    - For MVP, navigation works but filters not applied yet
    - Add TODO comment in code: "// TODO Phase 17: OrderHistory should read filter query param and apply date range"

    Why query params not state: URL-based filtering enables shareable links (agents can bookmark "orders this week"), consistent with RESTful patterns, supports browser back/forward navigation.
  </action>
  <verify>
    npm run typecheck passes

    Manual check:
    1. Click "Oggi" card → navigates to /orders?filter=today
    2. Click "Questa Settimana" card → navigates to /orders?filter=week
    3. Click "Questo Mese" card → navigates to /orders?filter=month
    4. Verify URL updates correctly with query parameter
    5. Verify OrderHistory page loads (filter not applied yet, expected for MVP)
    6. Verify active state visual feedback on click
    7. Check aria-labels present for accessibility
  </verify>
  <done>
    Click handlers implemented for all 3 cards.
    Navigation to /orders with query parameters (filter=today/week/month).
    aria-labels added for accessibility.
    role="button" added for semantic correctness.
    Active state visual feedback on click.
    TODO comment added for Phase 17 filter integration.
    TypeScript compilation passes.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run typecheck` passes in frontend directory
- [ ] OrdersSummaryWidget component created with 3 summary cards
- [ ] Colored left borders (blue/green/purple) match temporal periods
- [ ] Hover effects work (scale + shadow)
- [ ] Click navigation to /orders with query parameters
- [ ] Responsive layout (stacked on mobile, horizontal on desktop)
- [ ] aria-labels present for accessibility
- [ ] No TypeScript errors
- [ ] Widget integrated in Dashboard.tsx
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- OrdersSummaryWidget displays 3 clickable cards for temporal periods
- Cards navigate to OrderHistory with filter query parameters
- Hover and active states provide clear visual feedback
- Responsive design works on mobile and desktop
- No errors or warnings introduced
  </success_criteria>

<output>
After completion, create `.planning/phases/15-dashboard-homepage-ui/15-03-SUMMARY.md`:

# Phase 15 Plan 03: Orders Summary Widget Summary

**[Substantive one-liner - what shipped, not "phase complete"]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `archibald-web-app/frontend/src/components/OrdersSummaryWidget.tsx` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 15-04-PLAN.md (Target Visualization Widget)
</output>
