---
phase: 15-dashboard-homepage-ui
plan: 02
type: execute
---

<objective>
Create Budget Progress Widget with visual indicators and motivational display.

Purpose: Provide agents with immediate visibility of monthly budget performance against targets, using color-coded progress bars and percentage displays for quick assessment.
Output: BudgetWidget component integrated in Dashboard, displaying current/target budget with green/yellow/red color coding based on progress percentage.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-dashboard-homepage-ui/15-01-SUMMARY.md

**Key files:**
@archibald-web-app/frontend/src/pages/Dashboard.tsx
@archibald-web-app/frontend/src/components/OrderCardNew.tsx

**Tech stack available:**
- React 19 with hooks
- TypeScript strict mode
- Inline styles (Phase 10-06 decision)

**Established patterns:**
- Phase 10-06: Status-specific color coding (Blue/Green/Purple/Gray)
- Phase 09-03: Color-coded indicators (red=higher, green=lower) for semantic meaning
- Banking app UX patterns (visual feedback, progress indicators)
- Inline styles consistently used

**Constraining decisions:**
- Phase 10-06: Inline styles over CSS modules
- Dashboard layout from Plan 15-01 has 3 placeholder widget sections
- No backend API yet for target data (Phase 16 will add wizard, Phase 17 will add backend)

**Temporary approach for MVP**:
- Use localStorage to store/retrieve target values (temporary until Phase 17 backend)
- Mock current budget data with placeholder (will be replaced by Phase 17 API)
- Widget displays UI and logic, data integration deferred to Phase 17
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BudgetWidget component with progress bar and stats</name>
  <files>
    archibald-web-app/frontend/src/components/BudgetWidget.tsx,
    archibald-web-app/frontend/src/pages/Dashboard.tsx
  </files>
  <action>
    Create BudgetWidget.tsx component with:

    **Props interface:**
    ```typescript
    interface BudgetWidgetProps {
      currentBudget: number;  // Current month's orders total
      targetBudget: number;   // Monthly target budget
      currency?: string;      // Default "‚Ç¨"
    }
    ```

    **Component structure:**
    - Container div with card styling (background white, border-radius 10px, padding 20px, box-shadow)
    - Header: "Budget Mensile" title + info icon (tooltip: "Progressi vs target mensile")
    - Stats section: 3 columns
      - Column 1: Current budget (large number + "Attuale")
      - Column 2: Progress percentage (calculated: currentBudget / targetBudget * 100)
      - Column 3: Target budget (large number + "Target")
    - Progress bar: horizontal bar, height 20px, border-radius 10px, background #e0e0e0
      - Fill: width = progress %, transition smooth (0.3s ease)
    - Footer: Remaining amount or surplus message

    **Number formatting:**
    - Use Intl.NumberFormat('it-IT', { style: 'currency', currency: 'EUR' }) for currency display
    - Round percentage to 1 decimal place

    **Responsive:**
    - Mobile (<768px): 1 column layout, stats stacked vertically
    - Desktop (>=768px): 3 columns for stats, horizontal progress bar

    **Inline styles:**
    - Container: { background: '#fff', borderRadius: '10px', padding: '20px', boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }
    - Header: { fontSize: '18px', fontWeight: 'bold', marginBottom: '15px', color: '#2c3e50' }
    - Progress bar container: { background: '#e0e0e0', borderRadius: '10px', height: '20px', overflow: 'hidden' }
    - Progress bar fill: { height: '100%', transition: 'width 0.3s ease', borderRadius: '10px' }

    Integrate in Dashboard.tsx:
    - Replace first placeholder div with <BudgetWidget currentBudget={12500} targetBudget={20000} />
    - Temporary mock data until Phase 17 backend integration

    Why mock data: Phase 17 will provide backend API for metrics. Phase 16 adds target wizard for user input. For now, MVP focuses on UI component structure and visual design.
  </action>
  <verify>
    npm run typecheck passes

    Manual check:
    1. Dashboard renders BudgetWidget in first widget section
    2. Widget displays "Budget Mensile" title
    3. Stats show: ‚Ç¨12.500,00 (Attuale), 62,5% (Percentuale), ‚Ç¨20.000,00 (Target)
    4. Progress bar visible with fill at 62.5% width
    5. No console errors
  </verify>
  <done>
    BudgetWidget component created with props interface.
    Component displays current/target budget with formatted currency.
    Progress bar renders with calculated percentage width.
    Widget integrated in Dashboard.tsx with mock data.
    TypeScript compilation passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add visual progress indicators with color coding</name>
  <files>
    archibald-web-app/frontend/src/components/BudgetWidget.tsx
  </files>
  <action>
    Enhance BudgetWidget with color-coded visual indicators:

    **Color coding logic** (banking app semantic colors):
    - Green (#27ae60): progress >= 80% (on track, positive)
    - Yellow (#f39c12): progress >= 50% and < 80% (caution, needs attention)
    - Red (#e74c3c): progress < 50% (critical, urgent action)

    **Apply colors to:**
    1. Progress bar fill background
    2. Percentage text color
    3. Status badge with text (e.g., "üéØ In Target" green, "‚ö†Ô∏è Attenzione" yellow, "üî¥ Critico" red)

    **Badge component:**
    - Position: Top-right corner of widget (absolute positioning)
    - Style: padding 5px 10px, border-radius 15px, font-size 12px, font-weight bold
    - Background: slightly transparent version of status color (rgba with 0.2 alpha for background, full color for border)
    - Text:
      - Green (>=80%): "üéØ In Target"
      - Yellow (50-79%): "‚ö†Ô∏è Attenzione"
      - Red (<50%): "üî¥ Critico"

    **Additional visual enhancement:**
    - Add subtle animation: progress bar fill scales from 0 to actual % on mount (useEffect + setTimeout 100ms)
    - Hover effect on widget: slight shadow increase (box-shadow transition)

    **Calculation helper:**
    ```typescript
    const getStatusColor = (progress: number): { color: string; bgColor: string; text: string; icon: string } => {
      if (progress >= 80) return { color: '#27ae60', bgColor: 'rgba(39, 174, 96, 0.2)', text: 'In Target', icon: 'üéØ' };
      if (progress >= 50) return { color: '#f39c12', bgColor: 'rgba(243, 156, 18, 0.2)', text: 'Attenzione', icon: '‚ö†Ô∏è' };
      return { color: '#e74c3c', bgColor: 'rgba(231, 76, 60, 0.2)', text: 'Critico', icon: 'üî¥' };
    };
    ```

    Why these colors: Consistent with Phase 09-03 semantic color coding (green=good, yellow=caution, red=critical), matches banking app patterns (Intesa/UniCredit use similar visual language for account status).
  </action>
  <verify>
    npm run typecheck passes

    Manual check:
    1. Widget progress bar fill is yellow (#f39c12) for 62.5% progress
    2. Percentage text is yellow
    3. Status badge displays "‚ö†Ô∏è Attenzione" in top-right corner with yellow styling
    4. Progress bar animates from 0% to 62.5% on page load
    5. Change mock data to test all thresholds:
       - currentBudget={18000} targetBudget={20000} ‚Üí Green (90%)
       - currentBudget={8000} targetBudget={20000} ‚Üí Red (40%)
    6. Verify colors update correctly for all thresholds
  </verify>
  <done>
    Color coding logic implemented for 3 thresholds (green >=80%, yellow 50-79%, red <50%).
    Progress bar fill, percentage text, and status badge all use semantic colors.
    Status badge displays icon + text in top-right corner.
    Progress bar animation added (scales from 0 to actual % on mount).
    All color thresholds tested and working correctly.
    TypeScript compilation passes.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run typecheck` passes in frontend directory
- [ ] BudgetWidget component created with props interface
- [ ] Widget displays formatted currency (‚Ç¨ format, Italian locale)
- [ ] Progress bar with calculated percentage width
- [ ] Color coding works for all 3 thresholds (test with different mock values)
- [ ] Status badge visible in top-right corner
- [ ] Progress bar animation on mount
- [ ] No TypeScript errors
- [ ] Widget integrated in Dashboard.tsx
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- BudgetWidget component renders with current/target budget stats
- Progress bar displays with semantic color coding (green/yellow/red)
- Status badge shows appropriate icon and text for progress level
- Progress bar animates on mount for better UX
- No errors or warnings introduced
  </success_criteria>

<output>
After completion, create `.planning/phases/15-dashboard-homepage-ui/15-02-SUMMARY.md`:

# Phase 15 Plan 02: Budget Progress Widget Summary

**[Substantive one-liner - what shipped, not "phase complete"]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `archibald-web-app/frontend/src/components/BudgetWidget.tsx` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 15-03-PLAN.md (Orders Summary Widget)
</output>
