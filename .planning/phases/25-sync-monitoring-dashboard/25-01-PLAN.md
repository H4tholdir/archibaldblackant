---
phase: 25-sync-monitoring-dashboard
plan: 01
type: execute
---

<objective>
Create admin monitoring dashboard showing sync history, execution times, error rates, and health trends.

Purpose: Operational observability for sync performance and reliability.
Output: Admin dashboard with sync metrics, charts (success rate over time), error logs, execution time graphs.
</objective>

<context>
**Requirements**:
- Sync history table (last 50 syncs per type: timestamp, duration, status, error)
- Health trend charts (success rate last 7 days)
- Execution time graphs (avg time per sync type)
- Error log viewer (recent failures with stack traces)
- Aggregated stats (total syncs, avg duration, uptime percentage)

**Files**: frontend/src/pages/SyncMonitoringDashboard.tsx, backend endpoints for metrics history
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add sync metrics history API</name>
  <files>backend/src/index.ts, backend/src/sync-orchestrator.ts</files>
  <action>
    Store sync execution history in SQLite (sync_history table: id, type, mode, startedAt, completedAt, duration, status, error).
    Add GET /api/sync/history?type=&days= endpoint returning paginated history.
    Add GET /api/sync/metrics/summary endpoint returning aggregated stats.
  </action>
  <verify>Endpoints return sync history and stats</verify>
  <done>Metrics history API added. TypeScript passes.</done>
</task>

<task type="auto">
  <name>Task 2: Create SyncMonitoringDashboard component</name>
  <files>frontend/src/pages/SyncMonitoringDashboard.tsx</files>
  <action>
    Create admin dashboard with:
    - Sync history table (sortable, filterable)
    - Success rate chart (last 7 days, line chart)
    - Execution time chart (bar chart per sync type)
    - Error log section (expandable error details)
    Use Chart.js or recharts for visualizations. Inline styles.
  </action>
  <verify>Dashboard renders with charts and tables</verify>
  <done>SyncMonitoringDashboard created. TypeScript passes.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Admin sync monitoring dashboard</what-built>
  <how-to-verify>
    1. Navigate to /admin/sync-monitoring
    2. Verify sync history table shows recent syncs (50+ entries)
    3. Check success rate chart (7-day trend)
    4. Verify execution time chart (compare sync types)
    5. Expand error log, check stack trace details
    6. Verify aggregated stats (total syncs, avg duration, uptime %)
    7. Filter history by sync type, verify filtering works
    8. Test real-time updates (trigger sync, see new entry appear)

    Success: Dashboard provides comprehensive observability, charts accurate, history complete.
  </how-to-verify>
  <resume-signal>Type "approved"</resume-signal>
</task>

</tasks>

<success_criteria>
- Sync history API functional
- Monitoring dashboard with charts
- Error log viewer
- Real-time updates
- User verification passed
</success_criteria>

<output>
Create `.planning/phases/25-sync-monitoring-dashboard/25-01-SUMMARY.md`
</output>
