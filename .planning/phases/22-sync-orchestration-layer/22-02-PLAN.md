---
phase: 22-sync-orchestration-layer
plan: 02
type: execute
---

<objective>
Implement staggered sync scheduling with 15-minute intervals between syncs.

Purpose: Prevent resource spikes by spacing out sync operations.
Output: Scheduled sync execution with configurable intervals and start-time staggering.
</objective>

<context>
@.planning/phases/22-sync-orchestration-layer/22-01-PLAN.md

**Implementation**: Add scheduling logic to SyncOrchestrator.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add staggered scheduling to SyncOrchestrator</name>
  <files>
    archibald-web-app/backend/src/sync-orchestrator.ts
  </files>
  <action>
    Add startStaggeredAutoSync method:
    - Customers: T+0min
    - Products: T+15min
    - Prices: T+30min
    - Orders: T+45min
    - Repeat cycle every 60 minutes

    Use setInterval with calculated delays for each sync type.
  </action>
  <verify>
    Syncs execute with 15-minute stagger
  </verify>
  <done>
    Staggered scheduling implemented. TypeScript passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add configurable sync schedule endpoint</name>
  <files>
    archibald-web-app/backend/src/index.ts
  </files>
  <action>
    Add POST /api/sync/schedule endpoint to configure intervals.
  </action>
  <verify>
    Schedule configurable via API
  </verify>
  <done>
    Schedule endpoint added. TypeScript passes.
  </done>
</task>

</tasks>

<success_criteria>
- Staggered scheduling (15-min intervals)
- Configurable schedule via API
- Prevents resource spikes
</success_criteria>

<output>
Create `.planning/phases/22-sync-orchestration-layer/22-02-SUMMARY.md`
</output>
